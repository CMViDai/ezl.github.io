(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[229],{53973:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/yt",function(){return n(14480)}])},49690:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(85893),i=n(50723),s=n(60650),a=n(44082),c=(n(81553),n(97808),n(53948));n(92814);function u(e){return c._k(),(0,r.jsxs)("div",{className:"divCenter divCol",children:[(0,r.jsx)(a.Z,{}),(0,r.jsx)(s.Z,{}),(0,r.jsx)("div",{className:"layoutContentWrapStyle",children:e.children}),(0,r.jsx)(i.Z,{style:{witdth:"100%"}})]})}},14480:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var r=n(85893),i=n(49690),s=(n(41664),n(34051)),a=n.n(s),c=n(67294),u=n(9669),l=n.n(u),o=n(52164);function d(e,t,n,r,i,s,a){try{var c=e[s](a),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,i)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function a(e){d(s,r,i,a,c,"next",e)}function c(e){d(s,r,i,a,c,"throw",e)}a(void 0)}))}}function p(){var e=(0,c.useState)(""),t=e[0],n=e[1],i=(0,c.useState)(5),s=i[0],u=i[1],d=(0,c.useState)(90),p=d[0],x=d[1],m=(0,c.useState)([]),v=m[0],f=m[1],b=(0,c.useState)(!1),w=b[0],j=b[1],g="AIzaSyCXWi6Tuh1eiNviMAwVVUfKbbI9HRpU7mg",y=function(){var e=h(a().mark((function e(t){var n,r,i,s,c,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.match(/(user|c|channel)\/([^/?]+)/)){e.next=4;break}return e.abrupt("return",null);case 4:if(s=i[1],c=i[2],"channel"!==s){e.next=8;break}return e.abrupt("return",c);case 8:return e.next=10,l().get("https://www.googleapis.com/youtube/v3/channels?part=id&".concat("user"===s?"forUsername":"id","=").concat(c,"&key=").concat(g));case 10:return u=e.sent,e.abrupt("return",null===(n=u.data.items)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.id);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=h(a().mark((function e(){var n,r,i,c,u,d,h,x;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),f([]),e.prev=2,e.next=5,y(t);case 5:if(n=e.sent){e.next=8;break}throw new Error("Kh\xf4ng t\xecm \u0111\u01b0\u1ee3c channel ID t\u1eeb link.");case 8:return r=new Date(Date.now()-24*p*60*60*1e3).toISOString(),e.next=11,l().get("https://www.googleapis.com/youtube/v3/search",{params:{part:"snippet",channelId:n,maxResults:300,order:"date",publishedAfter:r,type:"video",key:g}});case 11:if(i=e.sent,0!==(c=i.data.items.map((function(e){return e.id.videoId}))).length){e.next=15;break}throw new Error("Kh\xf4ng c\xf3 video n\xe0o trong kho\u1ea3ng th\u1eddi gian n\xe0y.");case 15:return e.next=17,l().get("https://www.googleapis.com/youtube/v3/videos",{params:{part:"snippet,statistics",id:c.join(","),key:g}});case 17:u=e.sent,d=u.data.items.map((function(e){return{channel:e.snippet.channelTitle,title:e.snippet.title,views:parseInt(e.statistics.viewCount||"0"),link:"https://www.youtube.com/watch?v=".concat(e.id),id:e.id,published:(0,o.WU)(new Date(e.snippet.publishedAt),"dd/MM/yyyy"),thumbLink:e.snippet.thumbnails.medium.url,description:e.snippet.description}})),h=d.sort((function(e,t){return t.views-e.views})),x=h.slice(0,parseInt(s)),f(x),e.next=28;break;case 24:e.prev=24,e.t0=e.catch(2),console.error("L\u1ed7i:",e.t0.message),alert("C\xf3 l\u1ed7i x\u1ea3y ra: "+e.t0.message);case 28:return e.prev=28,j(!1),e.finish(28);case 31:case"end":return e.stop()}}),e,null,[[2,24,28,31]])})));return function(){return e.apply(this,arguments)}}();return(0,r.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4",children:"\ud83d\udd0d Ph\xe2n t\xedch video theo l\u01b0\u1ee3t xem"}),(0,r.jsxs)("div",{className:"flex flex-col gap-4 mb-6",children:[(0,r.jsx)("input",{type:"text",className:"p-2 border rounded",placeholder:"Nh\u1eadp link k\xeanh YouTube",value:t,onChange:function(e){return n(e.target.value)}}),(0,r.jsx)("input",{type:"number",className:"p-2 border rounded",placeholder:"Top N video",value:s,onChange:function(e){return u(e.target.value)}}),(0,r.jsx)("input",{type:"number",className:"p-2 border rounded",placeholder:"S\u1ed1 ng\xe0y g\u1ea7n \u0111\xe2y (VD: 90)",value:p,onChange:function(e){return x(e.target.value)}}),(0,r.jsx)("button",{onClick:k,disabled:w,className:"bg-blue-600 text-white px-4 py-2 rounded",children:w?"\u0110ang t\u1ea3i...":"L\u1ea5y video"})]}),v.length>0&&(0,r.jsxs)("table",{className:"table-auto w-full border border-collapse text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-gray-200",children:[(0,r.jsx)("th",{children:"A-Channel"}),(0,r.jsx)("th",{children:"B-Title"}),(0,r.jsx)("th",{children:"C-Views"}),(0,r.jsx)("th",{children:"D-Link"}),(0,r.jsx)("th",{children:"E-ID"}),(0,r.jsx)("th",{children:"F-Published"}),(0,r.jsx)("th",{children:"G-Thumb link"}),(0,r.jsx)("th",{children:"H-Thumb"}),(0,r.jsx)("th",{children:"I-Description"})]})}),(0,r.jsx)("tbody",{children:v.map((function(e){return(0,r.jsxs)("tr",{className:"border-t align-top",children:[(0,r.jsx)("td",{children:e.channel}),(0,r.jsx)("td",{children:e.title}),(0,r.jsx)("td",{children:e.views.toLocaleString()}),(0,r.jsx)("td",{children:(0,r.jsx)("a",{href:e.link,className:"text-blue-600",target:"_blank",rel:"noreferrer",children:e.link})}),(0,r.jsx)("td",{children:e.id}),(0,r.jsx)("td",{children:e.published}),(0,r.jsx)("td",{children:e.thumbLink}),(0,r.jsx)("td",{children:(0,r.jsx)("img",{src:e.thumbLink,alt:"thumb",className:"w-20"})}),(0,r.jsxs)("td",{children:[e.description.slice(0,100),"..."]})]},e.id)}))})]})]})}function x(){return(0,r.jsx)(i.Z,{children:(0,r.jsx)(p,{})})}}},function(e){e.O(0,[260,258,838,774,888,179],(function(){return t=53973,e(e.s=t);var t}));var t=e.O();_N_E=t}]);